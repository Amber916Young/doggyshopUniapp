{"version":3,"sources":["uni-app:///main.js","webpack:////Users/birdyyoung/Documents/HBuilderProjects/DoggyPets/pages/coupon/coupon_select/coupon_select.vue?5b24","webpack:////Users/birdyyoung/Documents/HBuilderProjects/DoggyPets/pages/coupon/coupon_select/coupon_select.vue?0979","webpack:////Users/birdyyoung/Documents/HBuilderProjects/DoggyPets/pages/coupon/coupon_select/coupon_select.vue?5447","webpack:////Users/birdyyoung/Documents/HBuilderProjects/DoggyPets/pages/coupon/coupon_select/coupon_select.vue?4bee","uni-app:///pages/coupon/coupon_select/coupon_select.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;;;AAGA;AACA,4H,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,sBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAA0H;AAC1H;AACiE;AACL;;;AAG5D;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,wFAAM;AACR,EAAE,iGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,4FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAA01B,CAAgB,2yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqD92B,yF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,IADA,kBACA,CACA,SACA,sCADA,EAEA,cAFA,EAGA,QAHA,EAIA,OAJA,GAMA,CARA,EASA,MATA,kBASA,MATA,EASA,CACA,iBACA,uBACA,yBACA,2BACA,CAdA,EAeA,iBAfA,+BAeA,CACA,iBACA,eACA,mBACA,CAnBA,EAoBA,WApBA,yBAoBA,CACA,8BADA,CACA;AACA,0CAFA,CAEA;AACA,2CAHA,CAGA;AACA,+BAJA,CAIA;AACA,gCALA,CAKA;AACA;AACA,uBACA,QADA,IAGA,YAVA,CAUA;AACA,GA/BA,EAgCA,WACA,SADA,qBACA,KADA,EACA,IADA,EACA,CACA,kCACA,cACA,CACA,gBACA,YADA,EAEA,UAFA,IAIA,CATA,EAWA,YAXA,wBAWA,EAXA,EAWA,CACA,8BADA,CACA;AACA,4CAFA,CAEA;AACA,6CAHA,CAGA;AACA,iCAJA,CAIA;AACA,kCALA,CAKA;AACA;AACA,yBACA,QADA,IAGA,YAVA,CAUA;AACA,KAtBA,EAuBA,UAvBA,sBAuBA,MAvBA,EAuBA,KAvBA,EAuBA,IAvBA,EAuBA,CACA,iBACA,2DACA,gCADA,EAEA,gBAFA,EAGA,kBAHA,IAIA,EACA,kBADA,EACA;AACA,qBAFA,CAEA;AAFA,OAJA,EAOA,IAPA,CAOA,gBACA,0BACA,wBACA;AACA;AACA;AACA,OAbA,EAaA,KAbA,CAaA;AACA;AACA,OAfA;AAgBA,KAzCA,EAhCA,E","file":"pages/coupon/coupon_select/coupon_select.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/coupon/coupon_select/coupon_select.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./coupon_select.vue?vue&type=template&id=d6a6f6aa&\"\nvar renderjs\nimport script from \"./coupon_select.vue?vue&type=script&lang=js&\"\nexport * from \"./coupon_select.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/coupon/coupon_select/coupon_select.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupon_select.vue?vue&type=template&id=d6a6f6aa&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.couponList.length > 0\n      ? _vm.__map(_vm.couponList, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var g0 =\n            item.rule.type === 0 && item.rule.use_range === 0\n              ? item.rule.amount.toFixed(1)\n              : null\n          var g1 =\n            item.rule.type === 0 && item.rule.use_range === 1\n              ? item.rule.amount.toFixed(1)\n              : null\n          var g2 =\n            item.rule.type === 1 && item.rule.use_range === 0\n              ? item.rule.discount.toFixed(1)\n              : null\n          var g3 =\n            item.rule.type === 1 && item.rule.use_range === 1\n              ? item.rule.discount.toFixed(1)\n              : null\n          var g4 =\n            item.rule.type === 2 && item.rule.use_range === 0\n              ? item.rule.amount.toFixed(2)\n              : null\n          var g5 =\n            item.rule.type === 2 && item.rule.use_range === 1\n              ? item.rule.amount.toFixed(2)\n              : null\n          return {\n            $orig: $orig,\n            g0: g0,\n            g1: g1,\n            g2: g2,\n            g3: g3,\n            g4: g4,\n            g5: g5\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupon_select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./coupon_select.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"container\">\n\t\t<block v-if=\"couponList.length === 0\">\n\t\t\t<div class=\"text_bold\" @click=\"selectCoupon(-1)\" >暂无可用优惠券</div>\n\t\t</block>\n\t\t<block v-if=\"couponList.length > 0\">\n\t\t\t<scroll-view :scroll-y=\"true\"   class=\"scroll-Y\">\n\t\t\t\t<div class=\"text_bold\" @click=\"selectCoupon(-1)\">不选择使用优惠券</div>\n\t\t\t\t<view  v-for=\"(item, index) in couponList\" :key=\"index\"\n\t\t\t :data-index=\"index\" class=\"coupon coupon-wave-left coupon-wave-right coupon-yellow-gradient\">\n\t\t\t\t\t<view class=\"coupon-info coupon-hole coupon-info-right-dashed\" @click=\"selectCoupon(item.batch_id)\">\n\t\t\t\t\t\t <!-- 使用范围，0—全场，1—商品\n\t\t\t\t\t\t 优惠卷类型, 0-满减, 1-折扣 2—直减-->\n\t\t\t\t\t\t <block v-if=\"item.rule.type === 0\">\n\t\t\t\t\t\t\t<block v-if=\"item.rule.use_range === 0\">\n\t\t\t\t\t\t\t\t<div class=\"coupon-price\"><text class=\"font-14\">¥</text>{{item.rule.amount.toFixed(1)}}<span>优惠券</span></div>\n\t\t\t\t\t\t\t\t<div class=\"coupon-description\">【全场 满减】{{item.coupon_batch.coupon_name}}</div>\n\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t\t<block v-if=\"item.rule.use_range === 1\">\n\t\t\t\t\t\t\t\t<div class=\"coupon-price\"><text class=\"font-14\">¥</text>{{item.rule.amount.toFixed(1)}}<span>优惠券</span></div>\n\t\t\t\t\t\t\t\t<div class=\"coupon-description\">【商品 满减】{{item.coupon_batch.coupon_name}}</div>\n\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t </block>\n\t\t\t\t\t\t <block v-if=\"item.rule.type === 1\">\n\t\t\t\t\t\t\t<block v-if=\"item.rule.use_range === 0\">\n\t\t\t\t\t\t\t\t<div class=\"coupon-price\">{{item.rule.discount.toFixed(1)}}<span>优惠券</span></div>\n\t\t\t\t\t\t\t\t<div class=\"coupon-description\">【全场 折扣】{{item.coupon_batch.coupon_name}}</div>\n\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t\t<block v-if=\"item.rule.use_range === 1\">\n\t\t\t\t\t\t\t\t<div class=\"coupon-price\">{{item.rule.discount.toFixed(1)}}<span>优惠券</span></div>\n\t\t\t\t\t\t\t\t<div class=\"coupon-description\">【商品 折扣】{{item.coupon_batch.coupon_name}}</div>\n\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t </block>\n\t\t\t\t\t\t <block v-if=\"item.rule.type === 2\">\n\t\t\t\t\t\t\t<block v-if=\"item.rule.use_range === 0\">\n\t\t\t\t\t\t\t\t<div class=\"coupon-price\"><text class=\"font-14\">¥</text>{{item.rule.amount.toFixed(2)}}<span>优惠券</span></div>\n\t\t\t\t\t\t\t\t<div class=\"coupon-description\">【全场 直减 无规则】{{item.coupon_batch.coupon_name}}</div>\n\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t\t<block v-if=\"item.rule.use_range === 1\">\n\t\t\t\t\t\t\t\t<div class=\"coupon-price\"><text class=\"font-14\">¥</text>{{item.rule.amount.toFixed(2)}}<span>优惠券</span></div>\n\t\t\t\t\t\t\t\t<div class=\"coupon-description\">【商品 直减 无规则】{{item.coupon_batch.coupon_name}}</div>\n\t\t\t\t\t\t\t</block>\n\t\t\t\t\t\t </block>\n\t\t\t\t\t\t <div class=\"coupon-expiry-date\">{{item.rule.use_started_at}}<br/>{{item.rule.use_ended_at}}</div>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"coupon-get coupon-get-already\">已领取</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</block>\n\t</view>\n</template>\n\n<script>\n\timport http from '@/utils/request.js'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcustomer: getApp().globalData.customer,\n\t\t\t\tcouponList:[],\n\t\t\t\ttype:\"\",\n\t\t\t\tids:\"\"\n\t\t\t}\n\t\t},\n\t\tonLoad(option) {\n\t\t\tvar myApp = this\n\t\t\tmyApp.ids = option.ids\n\t\t\tmyApp.type = option.type\n\t\t\tuni.startPullDownRefresh();\n\t\t},\n\t\tonPullDownRefresh() {\n\t\t\tvar myApp = this\n\t\t\tvar pageNo = 1;\n\t\t\tmyApp.loadCoupon();\n\t\t},\n\t\tonBackPress() {\n\t\t\tlet pages = getCurrentPages(); //获取所有页面栈实例列表\n\t\t\tlet nowPage = pages[pages.length - 1]; //当前页页面实例\n\t\t\tlet prevPage = pages[pages.length - 2]; //上一页页面实例\n\t\t\tprevPage.$vm.couponId = -1; //修改上一页data里面 searchVal 的值\n\t\t\tprevPage.$vm.addressId = -1; //修改上一页data里面 searchVal 的值\n\t\t\t//uni.navigateTo跳转的返回，默认1为返回上一级\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t});\n\t\t\treturn true; // 此处必须 return\n\t\t},\n\t\tmethods: {\n\t\t\tshowToast(title,icon){\n\t\t\t\tif(typeof icon === \"undefined\" ){\n\t\t\t\t\ticon = 'none';\n\t\t\t\t}\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: title,\n\t\t\t\t\ticon: icon\n\t\t\t\t})\t\n\t\t\t},\n\t\t\t\n\t\t\tselectCoupon(id){\n\t\t\t\tlet pages = getCurrentPages(); //获取所有页面栈实例列表\n\t\t\t\tlet nowPage = pages[pages.length - 1]; //当前页页面实例\n\t\t\t\tlet prevPage = pages[pages.length - 2]; //上一页页面实例\n\t\t\t\tprevPage.$vm.couponId = id; //修改上一页data里面 searchVal 的值\n\t\t\t\tprevPage.$vm.addressId = -1; //修改上一页data里面 searchVal 的值\n\t\t\t\t//uni.navigateTo跳转的返回，默认1为返回上一级\n\t\t\t\tuni.navigateBack({\n\t\t\t\t\tdelta: 1\n\t\t\t\t});\n\t\t\t\treturn true; // 此处必须 return \n\t\t\t},\n\t\t\tloadCoupon(pageNo,limit,type){\n\t\t\t\tvar myApp = this\n\t\t\t\thttp(\"coupon/getAll/collection/canuse\", {\n\t\t\t\t\t'customer_id': myApp.customer.id,\n\t\t\t\t\t'ids':myApp.ids,\n\t\t\t\t\t'type': myApp.type\n\t\t\t\t}, {\n\t\t\t\t\thideLoading: false, // 默认 false\n\t\t\t\t\thideMsg: true, // 默认 false\n\t\t\t\t}).then(res => {\n\t\t\t\t\tuni.stopPullDownRefresh() \n\t\t\t\t\tif(res.data === null){\n\t\t\t\t\t\tmyApp.showToast(\"暂无可用优惠券\")\n\t\t\t\t\t}\n\t\t\t\t\tmyApp.couponList = res.data\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t})\n\t\t\t},\n\t\t\t\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}